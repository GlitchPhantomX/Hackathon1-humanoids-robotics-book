# Feature Specification: Professional RAG Chatbot UI

**Feature Branch**: `002-rag-chatbot-ui`  
**Created**: 2025-12-04  
**Status**: Draft  
**Input**: User description: "# Professional RAG Chatbot UI Specification ## Overview A modern, professional chatbot widget positioned in the bottom-right corner of the Docusaurus site, inspired by industry-leading implementations (Intercom, Drift, Crisp). --- ## Visual Design ### Position & Layout - **Location**: Fixed bottom-right corner - **Default State**: Collapsed (floating button only) - **Expanded State**: Chat panel overlay - **Z-Index**: 9999 (above all other content) - **Spacing from edges**: 20px from bottom, 20px from right ### Dimensions #### Floating Button (Collapsed State) ``` Width: 60px Height: 60px Border-radius: 50% (perfect circle) Box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) ``` #### Chat Panel (Expanded State) ``` Desktop: Width: 400px Height: 600px Max-height: 80vh Border-radius: 16px Box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12) Mobile (< 768px): Width: 100vw Height: 100vh Border-radius: 0 (full screen) Position: fixed bottom-0 right-0 ``` --- ## Color Scheme (Professional Theme) ### Primary Colors ```css --chatbot-primary: #2563eb (Blue - Modern Tech) --chatbot-primary-hover: #1d4ed8 --chatbot-primary-light: #dbeafe --chatbot-secondary: #64748b (Slate) --chatbot-background: #ffffff --chatbot-surface: #f8fafc --chatbot-border: #e2e8f0 --chatbot-text-primary: #1e293b --chatbot-text-secondary: #64748b --chatbot-success: #10b981 --chatbot-error: #ef4444 ``` ### Message Bubbles ```css User Messages: Background: --chatbot-primary (#2563eb) Text: #ffffff Align: right Border-radius: 18px 18px 4px 18px Assistant Messages: Background: --chatbot-surface (#f8fafc) Text: --chatbot-text-primary (#1e293b) Align: left Border-radius: 18px 18px 18px 4px Border: 1px solid --chatbot-border (#e2e8f0) ``` --- ## Component Structure ### 1. Floating Button (Collapsed State) ``` â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ ğŸ’¬ â”‚ â† Chat Icon (or Robot Icon) â”‚ â”‚ â”‚ Badge â”‚ â† Optional: notification badge â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ ``` **Features:** - Smooth pulse animation on first load - Hover effect: scale(1.05) + shadow increase - Click: Opens chat panel with slide-up animation - Icon: Message bubble or robot icon (lucide-react: MessageCircle or Bot) - Optional: Red notification badge (new message count) **HTML Structure:** ```tsx <button className="chatbot-toggle-button"> <MessageCircle size={28} /> {hasNotification && <span className="notification-badge">1</span>} </button> ``` --- ### 2. Chat Panel (Expanded State) ``` â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ HEADER [Ã—] â”‚ â† Close button â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ â”‚ MESSAGES CONTAINER â”‚ â”‚ (Scrollable) â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ Welcome Message â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ User Message â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ Assistant Response â”‚ â”‚ â”‚ â”‚ [Source Links] â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ SELECTED TEXT BAR (Optional) â”‚ â† Appears when text selected â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ INPUT AREA â”‚ â”‚ [Textarea] [â†’] â”‚ â† Send button â”‚ Quick Actions: [Clear] [Sources] â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ ``` --- ## Detailed Component Specifications ### Header Section ``` Height: 60px Background: --chatbot-primary (#2563eb) Padding: 16px 20px Display: flex, justify-content: space-between Content: Left: - Icon: Robot/Book icon (24px) - Title: "Physical AI Assistant" - Subtitle: "Ask me about the book" Right: - Close button (X icon, white, 24px) - Hover: opacity 0.8 ``` **HTML Structure:** ```tsx <div className="chatbot-header"> <div className="header-left"> <Bot size={24} /> <div className="header-text"> <h3>Physical AI Assistant</h3> <span>Ask me about the book</span> </div> </div> <button className="close-button"> <X size={24} /> </button> </div> ``` --- ### Messages Container ``` Height: calc(100% - 60px header - 120px input) Background: #ffffff Padding: 20px Overflow-y: auto Display: flex, flex-direction: column Gap: 16px ``` #### Welcome Message (System) ``` Background: --chatbot-primary-light (#dbeafe) Border-left: 4px solid --chatbot-primary Padding: 16px Border-radius: 8px Font-size: 14px Color: --chatbot-text-primary Content: ğŸ‘‹ "Hello! I'm your Physical AI & Robotics assistant. Ask me anything about: â€¢ ROS 2 and robot control â€¢ NVIDIA Isaac platform â€¢ Humanoid robotics â€¢ Simulation with Gazebo ğŸ’¡ Tip: Select any text on the page and ask me about it!" ``` #### User Message Bubble ``` Max-width: 80% Align: flex-end (right side) Background: --chatbot-primary Color: white Padding: 12px 16px Border-radius: 18px 18px 4px 18px Font-size: 14px Line-height: 1.5 Word-wrap: break-word Box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1) Margin-left: auto ``` #### Assistant Message Bubble ``` Max-width: 80% Align: flex-start (left side) Background: --chatbot-surface (#f8fafc) Color: --chatbot-text-primary Border: 1px solid --chatbot-border Padding: 12px 16px Border-radius: 18px 18px 18px 4px Font-size: 14px Line-height: 1.5 Box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05) ``` ##### Source Citations (Inside Assistant Message) ``` Margin-top: 12px Display: flex, flex-wrap: wrap Gap: 8px Each Source: Background: white Border: 1px solid --chatbot-border Padding: 6px 12px Border-radius: 6px Font-size: 12px Color: --chatbot-primary Cursor: pointer Hover: background --chatbot-primary-light Icon: ğŸ“„ or <ExternalLink size={14} /> Text: "Week 3: ROS 2 Fundamentals" ``` #### Typing Indicator ``` Display: flex, gap: 4px Padding: 12px 16px Background: --chatbot-surface Border-radius: 18px Width: fit-content Three dots: Width: 8px Height: 8px Border-radius: 50% Background: --chatbot-secondary Animation: typing-bounce 1.4s infinite (each dot delayed by 0.2s) ``` --- ### Selected Text Bar (Conditional) ``` Display: Only when text is selected on page Background: --chatbot-primary-light Border-top: 1px solid --chatbot-border Padding: 12px 16px Gap: 12px Content: Icon: âœ‚ï¸ or <Scissors size={16} /> Text: "Selected: "{truncated text}"" Button: "Ask about this" Close: Small X to clear selection ``` **HTML Structure:** ```tsx <div className="selected-text-bar"> <Scissors size={16} /> <span className="selected-preview"> Selected: "{selectedText.substring(0, 50)}..." </span> <button className="ask-selected-btn"> Ask about this </button> <button className="clear-selection"> <X size={14} /> </button> </div> ``` --- ### Input Area ``` Background: white Border-top: 1px solid --chatbot-border Padding: 16px Display: flex, gap: 12px, align-items: flex-end Textarea: Min-height: 44px Max-height: 120px Resize: none (auto-grow) Border: 1px solid --chatbot-border Border-radius: 12px Padding: 12px 16px Font-size: 14px Placeholder: "Ask about Physical AI..." Send Button: Width: 44px Height: 44px Border-radius: 12px Background: --chatbot-primary Color: white Display: flex, align-items: center, justify-content: center Hover: --chatbot-primary-hover Disabled: opacity 0.5, cursor: not-allowed Icon: <Send size={20} /> ``` #### Quick Actions Row ``` Display: flex, gap: 8px Margin-top: 8px Font-size: 12px Clear Button: Color: --chatbot-text-secondary Cursor: pointer Hover: color --chatbot-error Icon: <Trash2 size={14} /> Text: "Clear chat" View Sources Button: Color: --chatbot-text-secondary Cursor: pointer Hover: color --chatbot-primary Icon: <BookOpen size={14} /> Text: "View sources" ``` --- ## Animations & Interactions ### Open/Close Animation ```css /* Opening */ @keyframes slideUp { from { transform: translateY(100%); opacity: 0; } to { transform: translateY(0); opacity: 1; } } /* Closing */ @keyframes slideDown { from { transform: translateY(0); opacity: 1; } to { transform: translateY(100%); opacity: 0; } } Duration: 0.3s Easing: cubic-bezier(0.4, 0, 0.2, 1) ``` ### Floating Button Pulse (First Load) ```css @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(37, 99, 235, 0.7); } 70% { box-shadow: 0 0 0 10px rgba(37, 99, 235, 0); } 100% { box-shadow: 0 0 0 0 rgba(37, 99, 235, 0); } } Repeat: 3 times Duration: 2s per cycle ``` ### Message Appear Animation ```css @keyframes messageSlideIn { from { transform: translateY(10px); opacity: 0; } to { transform: translateY(0); opacity: 1; } } Duration: 0.3s Easing: ease-out ``` ### Typing Indicator Animation ```css @keyframes typingBounce { 0%, 60%, 100% { transform: translateY(0); } 30% { transform: translateY(-10px); } } Duration: 1.4s Infinite loop Stagger: 0.2s per dot ``` --- ## Responsive Behavior ### Desktop (â‰¥ 768px) - Fixed position: bottom-right (20px, 20px) - Panel size: 400px Ã— 600px - Overlay with backdrop blur when open ### Tablet (768px - 1024px) - Fixed position: bottom-right (16px, 16px) - Panel size: 380px Ã— 560px ### Mobile (< 768px) - Floating button size: 56px Ã— 56px (slightly smaller) - Panel: Full screen (100vw Ã— 100vh) - No border-radius - Slide up from bottom animation - Header includes back/close button --- ## Accessibility Features ### Keyboard Navigation - Tab: Navigate through input, buttons, links - Enter: Send message (Shift+Enter for new line) - Escape: Close chatbot - Focus indicators: 2px solid --chatbot-primary outline ### ARIA Labels ```tsx <button aria-label="Open chat assistant"> <div role="log" aria-live="polite"> // Messages container <textarea aria-label="Type your question"> <button aria-label="Send message"> <button aria-label="Close chat"> ``` ### Screen Reader Support - Announce new messages - Clear status updates ("Thinking...", "Message sent") - Descriptive link text for sources --- ## Loading States ### Initial Loading (First Open) ``` Display: Centered spinner in messages container Text: "Initializing assistant..." Duration: 1-2 seconds ``` ### Sending Message ``` - Send button: Disabled + spinner icon - Input: Disabled - Add user message immediately - Show typing indicator ``` ### Error State ``` Display: Error message bubble Background: --chatbot-error (light red) Icon: âš ï¸ or <AlertCircle /> Text: "Sorry, something went wrong. Please try again." Action: Retry button ``` --- ## Professional Polish Details ### Micro-interactions 1. **Button Hover**: Scale(1.05) + cursor pointer 2. **Message Hover**: Slight background color change 3. **Link Hover**: Underline + color change 4. **Input Focus**: Border color change + subtle glow 5. **Scroll**: Smooth scrolling in messages ### Visual Feedback 1. **Message Sent**: Checkmark animation âœ“ 2. **Message Read**: Double checkmark âœ“âœ“ 3. **Typing**: Three-dot animation 4. **Error**: Shake animation on error message ### Smooth Transitions ```css transition: all 0.2s ease-in-out; ``` Apply to: buttons, colors, transforms, shadows --- ## Implementation Checklist ### Phase 1: Structure - [ ] Create ChatbotWidget.tsx component - [ ] Implement floating button - [ ] Implement chat panel structure - [ ] Add open/close toggle logic ### Phase 2: Styling - [ ] Apply color scheme - [ ] Style message bubbles - [ ] Add responsive breakpoints - [ ] Implement animations ### Phase 3: Functionality - [ ] Connect to backend API - [ ] Handle message sending/receiving - [ ] Implement text selection detection - [ ] Add conversation history - [ ] Add source citation links ### Phase 4: Polish - [ ] Add loading states - [ ] Add error handling - [ ] Implement accessibility features - [ ] Test on all devices - [ ] Optimize performance --- ## Design Reference **Inspiration**: Intercom, Crisp, Drift chatbots **Icon Library**: lucide-react **Font**: Inherit from Docusaurus (typically Inter or system fonts) **Mobile-first**: Build for mobile, enhance for desktop --- ## Success Criteria

## Edge Cases

- What happens if the user asks a question completely unrelated to the textbook content? (e.g., "What's the weather like?")
- How does the chatbot handle very long or complex selected text (beyond typical chunking limits)?
- What is the behavior if the backend API is unreachable or returns an error during a chat interaction?
- How does the system handle rapid-fire questions from a single user (rate limiting)?
- What happens if a Docusaurus page linked in a source citation is moved or deleted?
- How does the chatbot respond to queries in languages other than English (if multi-language is not supported)?

## Requirements *(mandatory)* âœ… Professional, modern appearance âœ… Smooth animations (60fps) âœ… Responsive on all devices âœ… Accessible (WCAG 2.1 AA) âœ… Fast loading (< 100ms interaction response) âœ… Matches Docusaurus theme colors (optional integration) âœ… No layout shift when opening/closing âœ… Works offline (graceful degradation)