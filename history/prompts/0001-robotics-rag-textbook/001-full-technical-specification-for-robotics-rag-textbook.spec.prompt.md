--- 
id: 001
title: Full technical specification for robotics RAG textbook
stage: spec
date: 2025-12-05
surface: agent
model: gemini-1.5-pro
feature: 0001-robotics-rag-textbook
branch: N/A
user: user
command: /sp.specify # **Physical AI & Humanoid Robotics Textbook – Full Technical Specification** ## **1. Project Overview** This project delivers a complete **Physical AI & Humanoid Robotics educational platform**, consisting of: 1. A full **Docusaurus-based textbook website**, generated using **Spec-Kit Plus** and edited using **Claude Code**. 2. A fully integrated **RAG-powered conversational AI assistant**, embedded into the textbook site. 3. Backend infrastructure built using **FastAPI**, **Qdrant Cloud**, **Neon Serverless Postgres**, and **Gemini API** (instead of OpenAI). The aim is to provide an interactive learning system capable of: * guiding students through course material, * answering questions grounded strictly in the textbook content, * performing “selected text” Q&A using contextual retrieval. --- ## **2. Directory Structure Specification** The main working directory is: ``` C:\new\physical-ai-robotics-textbook ``` Inside this directory, the system must maintain the following structure: ``` physical-ai-robotics-textbook/ │ ├── docs/ │ ├── introduction/ │ ├── modules/ │ ├── labs/ │ ├── research/ │ └── glossary/ │ ├── rag-backend/ │ ├── app/ │ │ ├── main.py │ │ ├── rag_engine.py │ │ ├── db.py │ │ ├── qdrant_client.py │ │ └── schema.py │ ├── requirements.txt │ └── README.md │ ├── embeddings/ │ ├── docs_index.json │ ├── qdrant_vectors/ │ └── postgres/ │ ├── scripts/ │ ├── ingest_docs.py │ └── build_embeddings.py │ ├── static/ │ ├── js/ │ │ └── chatbot-widget.js │ └── css/ │ │ └── chatbot.css │ ├── docusaurus.config.js ├── sidebar.js ├── package.json └── README.md ``` --- ## **3. Functional Requirements** ### **3.1 Textbook Authoring Requirements** 1. Use **Docusaurus v3**. 2. Use **Spec-Kit Plus** to generate the initial structure. 3. Use **Claude Code** for iterative content writing. 4. Support: * Modules * Labs * Assignments * Videos * Glossary * AI-ready text structure 5. The site must build and deploy to **GitHub Pages**. --- ## **4. RAG Chatbot Requirements** ### **4.1 RAG Architecture** The RAG system must include: | Component | Technology | | ------------------ | ---------------------------------------- | | Vector DB | Qdrant Cloud (Free Tier) | | Relational DB | Neon Serverless Postgres | | Language Model | Gemini API (user has no OpenAI key) | | Backend | FastAPI | | Client-side widget | Pure JS + WebSocket/REST | | Authentication | API key in backend environment variables | --- ### **4.2 Backend Core Features** The backend must support: #### **4.2.1 Document Ingestion** * Parse Markdown files from `docs/`. * Split text into clean chunks (200–800 tokens). * Generate embeddings using **Gemini’s embedding model**. * Store: * metadata → Postgres (document, title, path) * vectors → Qdrant #### **4.2.2 Query Handling Pipeline** ``` User → Widget → FastAPI → Retriever → Gemini → Response → Widget ``` Steps: 1. Receive user query + optional selected text. 2. If selected text exists → override retrieval with selected content only. 3. Otherwise: * perform vector similarity search in Qdrant * fetch metadata from Postgres 4. Compose context prompt. 5. Call Gemini model with system constraints: * 